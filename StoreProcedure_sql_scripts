1. generateEmployeeCode

	DELIMITER $$
	CREATE PROCEDURE `generateEmployeeCode`(in empId int , out empCode varchar(20))
	begin
	update employee set employee_code=concat(lower(first_name),'0',cast(id as char)) where id=empId;
	select employee_code into empCode  from employee where id=empId;
	end$$
	DELIMITER ;

2. SP for Deleting employee by employeecode

    DELIMITER $$
    CREATE DEFINER=`root`@`localhost` PROCEDURE `deleteEmployeeByCode`(in empCode varchar(50))
    begin
        -- declarring variable
        declare employeeId int;
        declare employeeCredentialId int;

        -- declare error
        declare exit handler for sqlexception
        begin
            show errors;
        end;

        declare exit handler for sqlwarning
        begin
            show warnings;
        end;

        start transaction;
        -- selecting ids into local variable
        select id into employeeId from employee where employee_code=empCode;
        select id into employeeCredentialId from employee_credential where employee_code=empCode;

        -- deleting records by id
        Delete from employee where id=employeeId;
        Delete from employee_credential where id=employeeCredentialId;
        commit;
    end$$
    DELIMITER ;

3. SP to delete company service by companycode

    delimiter //
    drop procedure if exists sp_deleteCompanyServiceByCompanyCode;
    create procedure sp_deleteCompanyServiceByCompanyCode(in the_company_code varchar(20))
    begin
        -- declaration
        declare current_id varchar(10);
        declare finished boolean default false;
        declare id_cursor cursor for select id from company_service where company_code=the_company_code;
        declare continue handler for not found set finished=true;

        open id_cursor;
            id_loop:loop
                fetch id_cursor into current_id;

                -- loop terminating handler
                if finished then
                    leave id_loop;
                 end if;
                 -- main query
                 delete from company_service where id=current_id;
            end loop id_loop;
        close id_cursor	;
        commit;
    end//
delimiter ;